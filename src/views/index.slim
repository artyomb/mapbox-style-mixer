.section
  .section-title Service Statistics
  .stats-grid
    .stat-box
      .stat-number = @styles.length
      .stat-desc Available styles
    .stat-box
      .stat-number = @total_sources
      .stat-desc Total sources
    .stat-box
      .stat-number 
        - hours = (@uptime / 3600).to_i
        - minutes = ((@uptime % 3600) / 60).to_i
        = "#{hours}h #{minutes}m"
      .stat-desc Uptime

.section
  .section-title 
    | Application Configuration
    .header-buttons
      a.btn href="#" onclick="toggleGlobalConfig()" üìã View Config
  
  .global-config.hidden id="global-config"
    .config-yaml
      pre = @config.to_yaml

.section
  .section-title 
    | Available Styles
    .header-buttons
      a.btn.refresh-btn.disabled href="/refresh" Refresh Styles
      a.btn.map-btn.disabled href="#" onclick="toggleMapPreviewForm()" üåç Map Preview
  
  #map-preview-form.map-preview-form.hidden
    .form-container
      .form-label Please paste URL
      .input-group
        input#style-url-input.form-input type="text" placeholder="https://example.com/style.json" 
        button.btn.btn-primary.form-submit onclick="openMapWithStyle()" Go
  .styles-container
    - @styles.each do |style|
      .style-card.disabled
        .style-header
          .style-id-section
            span.id-label Style ID: 
            span.id-value = style[:id]
          .style-name = style[:name]
          .mixed-style-info
            .info-item
              span.label Layers: 
              span.value = style[:mixed_style][:layers_count]
            .info-item
              span.label Sources: 
              span.value = style[:mixed_style][:sources_count]
            .info-item
              span.label Fonts: 
              span.value = style[:fonts].length
        .style-description 
          | Style composition from #{style[:sources_count]} sources
        
        .endpoint-section
          .endpoint-title Style Endpoint
          .endpoint-list
            .endpoint-item
              a.btn.btn-small.copy-btn.disabled href="#" üìã
              a.endpoint-link href=style[:endpoint] = "#{request.base_url}#{style[:endpoint]}"
              a.btn.btn-small.test-btn-pill.disabled href="/map?style=#{style[:id]}" üåç Preview Map
        
        .sources-section
          .sources-title Sources (#{style[:sources_count]})
          .sources-list
            - style[:sources].each do |source|
              - source_url = source.is_a?(Hash) ? source['url'] : source
              .source-item
                a.btn.btn-small.copy-btn.disabled href="#" üìã
                a.source-link href=source_url = source_url
                a.btn.btn-small.test-btn-pill.disabled href="/map?style_url=#{source_url}" üåç Preview Map
        

        
        .fonts-section
          .fonts-title Fonts (#{style[:fonts].length})
          .fonts-list
            - style[:fonts].each do |font|
              .font-item
                a.btn.btn-small.copy-btn href="#" data-copy-text="/fonts/#{font[:path]}/0-255.pbf" üìã
                span.font-name = font[:name]
                a.font-link href="/fonts/#{font[:path]}/0-255.pbf" Download
          
        - if style[:sprites].any?
          .sprites-section
            .sprites-title Sprites (#{style[:sprites].sum { |_, files| files.size }})
            .sprites-list
              - style[:sprites].each do |type, files|
                - files.each do |ext|
                  .sprite-item
                    a.btn.btn-small.copy-btn href="#" data-copy-text="#{request.base_url}/sprite/#{style[:id]}_sprite#{type}.#{ext}" üìã
                    span.sprite-url = "#{request.base_url}/sprite/#{style[:id]}_sprite#{type}.#{ext}"
                    a.sprite-link href="/sprite/#{style[:id]}_sprite#{type}.#{ext}" Download 