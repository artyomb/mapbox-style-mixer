.header
  h1 Mapbox Style Mixer
  p Service for combining and managing Mapbox styles

.section
  .section-title Service Statistics
  .stats-grid
    .stat-box
      .stat-number = @styles.length
      .stat-desc Available styles
    .stat-box
      .stat-number = @total_sources
      .stat-desc Total sources
    .stat-box
      .stat-number 
        - hours = (@uptime / 3600).to_i
        - minutes = ((@uptime % 3600) / 60).to_i
        = "#{hours}h #{minutes}m"
      .stat-desc Uptime

.section
  .section-title 
    | Available Styles
    .header-buttons
      a.btn.refresh-btn href="/refresh" Refresh Styles
      a.btn.map-btn href="/map" target="_blank" 🌍 Map Preview
  .styles-container
    - @styles.each do |style|
      .style-card
        .style-header
          .style-name = style[:name]
          .style-id = style[:id]
        .style-description 
          | Style composition from #{style[:sources_count]} sources
        .style-stats
          .stat-item
            span.stat-label ID: 
            span.stat-value = style[:id]
          .stat-item
            span.stat-label Sources: 
            span.stat-value = style[:sources_count]
          .stat-item
            span.stat-label Style Endpoint: 
            .endpoint-container
              span.copy-icon 📄
              span.endpoint-url = "#{request.base_url}#{style[:endpoint]}"
            a.btn.btn-small href=style[:endpoint] target="_blank" Open
            a.btn.btn-small href="/map?style=#{style[:id]}" target="_blank" 🌍 Test
          .stat-item
            span.stat-label Status: 
            span.stat-value.status-ok ● Available
          
        .sprite-section
          .sprite-title Sprites
          .sprite-endpoints
            .sprite-item
              span.sprite-label PNG: 
              .endpoint-container
                span.copy-icon 📄
                span.endpoint-url = "#{request.base_url}/sprite/#{style[:id]}.png"
              a.btn.btn-small href="/sprite/#{style[:id]}.png" target="_blank" Open
            .sprite-item
              span.sprite-label JSON: 
              .endpoint-container
                span.copy-icon 📄
                span.endpoint-url = "#{request.base_url}/sprite/#{style[:id]}.json"
              a.btn.btn-small href="/sprite/#{style[:id]}.json" target="_blank" Open 